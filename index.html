<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //Generate a random computer choice (rock, paper or scissors)
        //1 == Rock
        //2 == Paper
        //3 == Scissors
        let gameAborted = false;

        function getComputerChoice() {
            let computerChoice = Math.floor(Math.random() * 3) + 1;

            if (computerChoice === 1) {
                return `rock`;
            } else if (computerChoice === 2) {
                return `paper`;
            } else if (computerChoice === 3) {
                return `scissors`;
            }
        }


        //Get player choice (Rock, Paper, or Scissors) and validate his response


        function getPlayerChoice() {
            let validResponse = false
            let numberAttempts = 0;

            while (numberAttempts < 5) {
                let playerSelection = prompt("Type your selection (Rock, Paper, Scissors): ")

                playerSelection = playerSelection.toLowerCase();

                if (playerSelection ==="rock" || playerSelection ==="paper" || playerSelection ==="scissors") {
                    validResponse == true;
                    return playerSelection;
                } else if (numberAttempts === 4){
                    numberAttempts++;
                } else {
                    console.log(`You entered ${numberAttempts + 1} unexpected answer(s) (max. 5), please try again\n`);
                    numberAttempts++;
                }
            }
            if (numberAttempts === 5) {
                console.log(`You typed an invalid answer 5 times. Game aborting...`);
                gameAborted = true;
            }
        }

        //Play a single round of Rock Paper Scissors

        function playRound(playerSelection, computerSelection) {
            switch (playerSelection) {
                case `rock`:
                    if (computerSelection === `scissors`) {
                        console.log("You won! Rock beats scissors");
                        return `win`;
                    } else if(computerSelection === `paper`) {
                        console.log("You lost! Paper beats rock");
                        return `loose`;
                    } else {
                        console.log("You tied");
                        return `tie`;
                    }
                    break;
                case `paper`:
                    if (computerSelection === `rock`) {
                        console.log("You won! Paper beats rock");
                        return `win`;
                    } else if(computerSelection === `scissors`) {
                        console.log("You lost! Scissors beats paper");
                        return `loose`;
                    } else {
                        console.log("You tied");
                        return `tie`;
                    }
                    break;
                case `scissors`:
                    if (computerSelection === `paper`) {
                        console.log("You won! Scissors beats paper");
                        return `win`;
                    } else if(computerSelection === `rock`) {
                        console.log("You lost! Rock beats scissors");
                        return `loose`;
                    } else {
                        console.log("You tied");
                        return `tie`;
                    }
                    break;
            }
        }

        //Create a 5 round format, and keep track of both player and computer scores

        function game() {
            let playerScore = 0;
            let computerScore = 0;
            let roundResult = undefined;

            for (let i = 0; i < 5; i++) {
                let roundResult = playRound(getComputerChoice(), getPlayerChoice());
                if (roundResult == `win`) {
                    playerScore++;
                } else if (roundResult == `loose`) {
                    computerScore++;
                }
                console.log(`Score: You ${playerScore} - ${computerScore} Computer`);
            }

            if (playerScore > computerScore) {
                console.log("You won the game! Good job!");
            } else if (computerScore > playerScore){
                console.log("You lost the game! Better luck next time!");
            } else {
                console.log("The game was a tie!")
            }
        }

        game();


        

        //Determine the winner
        //Output result of the round
        //Save score
        //Output result of the game
    </script>
</body>
</html>